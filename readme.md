# 部落冲突夜世界,主世界自动化刷钱辅助
**辅助交流群675162515，刚建群，人数较少，欢迎加入**

**2025-5-24正常可用，正常维护中**

[家乡版辅助传送门](https://github.com/qilishidai/coc_robot)

欢迎给star

该辅助完全运行在Windows，通过winapi操作模拟器完成操作。辅助与模拟器完全隔离的，避免游戏检测。与其他同类型的运行在模拟上的辅助有本质区别，可以更好的避免游戏检测。


---  
## 本项目夜世界辅助使用指南  

✅ **适用于夜世界挂机，轻松获取资源**  
### 🔧 **基础设置**  
1. **安装雷电模拟器**：[雷电模拟器官网](https://www.ldmnq.com/)  
2. **调整模拟器分辨率**：宽 **800**，高 **600**，DPI **160**（重要）。  
3. **Windows 系统缩放**：调整为 **100%**（重要）,如果你是启动了模拟器后再调节,则需要重启模拟器才会生效。  
4. **模拟器中安装部落冲突**，登录账号，确保进入 **夜世界**，并使用 **默认背景**。  
5. **启动辅助时需要先在游戏内配兵**：建议使用 **全亡灵或全女巫**（其他兵种已经做了适配，自行选择即可,但仅支持单一兵种）。
6. 不支持任何滤镜软件一起运行,例如微星小飞机,英伟达滤镜,调节亮度的滤镜软件

### 🚀 **运行辅助（选择以下方式之一）**  
#### **1. 快速运行（推荐）**  
🔗 **[下载辅助](https://github.com/qilishidai/ClashOfClansResourceRaid/releases)**，解压后运行 **`main.exe`**。  

#### **2. 源码运行（适用于开发者）**  
- **安装 Python**，执行以下命令安装依赖：  
  ```shell
  pip install pywin32
  pip install psutil
  ```  
- **在 CMD 运行辅助**：  
  ```shell
  python main.py   
  ```  

### ⚙ **操作指南**  
1. **点击“更多” → “设置”** 进行个性化配置。  
2. **点击“启动”** 开始挂机作战。  

### 🛠 **设置选项说明**  
- **雷电模拟器索引**：指定使用的模拟器，多开器中第一个索引为 `0`，第二个为 `1`**（如果你不知道什么是多开，自己在做什么，请设置为0）**。  
- **部落冲突包名**：支持国服和国际服。  
- **一直执行**：`True` 为持续挂机，`False` 根据设定时间运行。  
- **需要执行多少秒**：若 **一直执行=False**，则在设定时间后停止挂机。  
- **是否开启刷墙**：`True` 开启刷墙功能，`False` 关闭。  
- **循环最大等待秒数**：控制每轮挂机的最大等待时间。  
- **至少多少金币/圣水开始刷墙**：设定刷墙的资源门槛。  

### 🏗 **编译为 EXE**  
```shell
pyinstaller --noconsole --exclude-module=cv2 main.py
```
然后复制源码的资源文件到 `dist\main` 目录，`main.exe` 即为可执行文件。  

### ⚠ **使用须知**  
1. **模拟器不可最小化**，但可以被其他窗口遮挡。若误最小化，辅助会自动矫正。  
2. **挂机时请勿手动操作模拟器**，避免影响脚本运行。  

📩 **如有问题，可联系作者 QQ：2105758776**。  



---

## 📝 **更新日志**  

### 📌 **2025年4月12日**  
- 修复国服重启后弹窗问题
- 适配其它兵种
- 优化打开进攻页面判断
- 发布 EXE 版本。  


### 📌 **2025年1月23日**  
- 修复国服更新后不下兵的问题。  
- 发布 EXE 版本。  

### 📌 **2024年9月27日**  
- 更新 README 注意事项。  
- 修复进攻页面加载失败问题。  

### 📌 **2024年7月31日**  
- 增强 **出兵页面识别**。  
- **新增 `main.pyw` 入口**，配置好 Python 环境后可双击运行，更加便捷。  
- 修复关闭刷墙导致的报错问题。  

### 📌 **2024年7月26日**  
- 修复刷墙时的滑动和点击逻辑问题。  

### 📌 **2024年7月25日**  
- **支持后台模式**，可隐藏模拟器运行（“更多” → “隐藏模拟器”）。  
- 重写键鼠操作逻辑，修复 OpenGL 模式后台失效问题。  

---  

## 🛠 **待修复问题**  
1. 无法最小化模拟器运行，只可以通过操作界面隐藏模拟器。
2. 有时会无法正常检测进入夜世界，目前可以通过重启模拟器或辅助解决。
3. ~~触发开始战斗后，有时由于模拟器卡顿还在基地，需要图色判断，但不影响使用，日后修复~~（7月31日已修复）。
4. 国服刷墙问题

🔗 **第三方库**：[OP（operator & open）](https://github.com/WallBreaker2/op)


---  
## 家乡打鱼辅助测试版（实验性功能）


**家乡打鱼辅助测试版（实验性功能）**  


目前家乡辅助国际服 **2025年4月12日** 可正常使用，国际服稳定挂机，国服暂未适配。下一步计划使用 **Python** 重写，欢迎大佬参与！  

🔗 **[下载地址（2025年4月13日更新） ](https://qilishidai.lanzoub.com/iGNoR2tg1w7i)** （如果未及时更新，请进群下载。进群自动审核）

### 使用说明  
1. **支持超级野蛮人打鱼，全飞龙打鱼，以及活动兵种打鱼**（需拥有对应兵种）。  
2. **解压前需添加信任目录**，否则可能无法运行。  
3. **辅助运行方式**：  
   - 双击 `exe` 文件打开软件。  
   - 在空白处 **右键 -> 新建账号**，填写相关信。  
   - 右键点击 **启动** 开始挂机。
   - 双击辅助软件对应的账号可以查看该账号的运行日志
4. **部落冲突游戏需要的事先设置**：  
   - **清空所有当前兵种**，根据exe所在目录的`账号配置.ini`文件配置的进攻流派配置兵种,具体兵种配置方法在配置文件里面有写  
   - 登录游戏时需要默认进入 **家乡**。  
   - 模拟器配置按 **夜世界**辅助的设定。  
   - 英雄皮肤以及家乡背景均要默认。
5. 其他注意事项同 **夜世界辅助**。
6. 如果一打开辅助就报错，请检查安全软件信任目录，或者在**模拟器多开器页面新建多一个模拟器解决**（代码遗留问题）


📌 **源码获取**  
源码及编译运行说明见根目录 `readme` 文件。  
🔗 **[百度网盘](https://pan.baidu.com/s/1ePeLAjJr30p60VAZ0PnuIw?pwd=w867)**  
源码问题欢迎联系作者

### **2025-4-13 更新内容**  
- **目前配置文件可选进攻流派，支持超级野蛮人和龙流活动兵种**
- **启动辅助前会先判断当前缩放是不是100%。**
- **其他优化**
- **支持活动兵种，兵种和进攻流派选择在配置文件里面设置。需要按照配置文件里的要求事先配置好对应品种。**
### **2025-3-27 更新内容**  
- **适配国际服造兵无需时间** ✅
### **2025-3-26 更新内容**  
- **修复国际服造兵问题** ✅
